---
import { getAllCards } from '../data/cards';
import type { Card as CardType } from '../data/cards';
import OptimizedImage from './OptimizedImage.astro';

interface Props {
  card: CardType;
  showDescription?: boolean;
  isFeatured?: boolean;
  isDetailed?: boolean; // Added isDetailed to props
  animationDelay?: string;
}

const { card, showDescription = true, isFeatured = false, isDetailed = false, animationDelay = '0ms' } = Astro.props; // Added isDetailed with default value

// Determina a classe de animação com base na propriedade isFeatured
const animationClass = isFeatured ? 'animate-on-scroll-featured' : 'animate-on-scroll';
---

<div class="h-full animate-on-scroll" data-animation="fadeInUp">
  <a 
    href={`/area/${card.slug}`} 
    class="block h-full bg-white rounded-xl shadow-md overflow-hidden transition-all duration-300 hover:shadow-xl hover:-translate-y-2 card-hover"
    aria-labelledby={`card-title-${card.id}`}
  >
    <div class="relative overflow-hidden aspect-video">
      <!-- Efeito de blob decorativo -->
      <div class="absolute -top-6 -right-6 w-32 h-32 bg-indigo-100 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob"></div>
      <div class="absolute -bottom-8 -left-8 w-32 h-32 bg-pink-100 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-2000"></div>
      
      <div class="relative">
<OptimizedImage 
        src={card.imageUrl} 
        alt={card.title} 
        width={isFeatured ? 800 : 400} 
        height={isFeatured ? 450 : 225} 
        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 ease-in-out" 
      />
        
        <!-- Badge de destaque -->
        {card.id === 1 && (
          <div class="absolute top-4 right-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-xs font-bold px-3 py-1 rounded-full shadow-md">
            Destaque
          </div>
        )}
      </div>
    </div>
    
    <div class="p-6 h-full flex flex-col">
      <h2 id={`card-title-${card.id}`} class="text-xl font-bold text-gray-800 mb-2 font-heading">{card.title}</h2>
      <p class="text-gray-600 mb-4">{card.description}</p>
      
      {isDetailed && (
        <div class="mt-4 pt-4 border-t border-gray-200">
          <p class="text-gray-700">{card.content}</p>
        </div>
      )}
      
      {!isDetailed && (
        <div class="mt-auto pt-4">
          <span class="inline-block gradient-primary text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 hover:shadow-lg transform hover:-translate-y-1">
            Ver detalhes
          </span>
        </div>
      )}
    </div>
  </a>
</div>

<style>
@keyframes blob {
  0%, 100% { transform: translate(0, 0) scale(1); }
  25% { transform: translate(10px, -10px) scale(1.1); }
  50% { transform: translate(0, 10px) scale(0.9); }
  75% { transform: translate(-10px, -10px) scale(1.05); }
}

.animate-blob {
  animation: blob 7s infinite;
}

.animation-delay-2000 {
  animation-delay: 2s;
}

.animation-delay-4000 {
  animation-delay: 4s;
}

.font-heading {
  font-family: var(--font-heading);
}
</style>